<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch·ªânh s·ª≠a t√†i kho·∫£n kh√°ch h√†ng</title>
    <link th:href="@{/css/bootstrap-5.3.3.css}" rel="stylesheet">
    <style>
        .toggle-password {
            position: absolute;
            right: 10px;
            top: 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>
<div class="container mt-5">
    <h2 class="mb-4">Ch·ªânh s·ª≠a t√†i kho·∫£n kh√°ch h√†ng</h2>
    <form id="editUserForm" method="post" th:object="${userDto}">

    <!-- Hidden field to store user ID -->
        <input type="hidden" th:field="*{id}">

        <div class="mb-3">
            <label for="name" class="form-label">T√™n <span class="text-danger">*</span></label>
            <input type="text"
                   class="form-control"
                   id="name"
                   th:field="*{name}"
                   required
                   pattern="^([A-Za-z√Ä√Å√Ç√É√à√â√ä√å√ç√í√ì√î√ï√ô√öƒÇƒêƒ®≈®∆†∆Ø√†√°√¢√£√®√©√™√¨√≠√≤√≥√¥√µ√π√∫ƒÉƒëƒ©≈©∆°∆∞·∫†-·ªπ]+)(\s+[A-Za-z√Ä√Å√Ç√É√à√â√ä√å√ç√í√ì√î√ï√ô√öƒÇƒêƒ®≈®∆†∆Ø√†√°√¢√£√®√©√™√¨√≠√≤√≥√¥√µ√π√∫ƒÉƒëƒ©≈©∆°∆∞·∫†-·ªπ]+)+$"
                   title="T√™n ph·∫£i g·ªìm t·ª´ 2 t·ª´ tr·ªü l√™n, kh√¥ng ch·ª©a s·ªë ho·∫∑c k√Ω t·ª± ƒë·∫∑c bi·ªát." />
            <p th:if="${#fields.hasErrors('name')}" class="text-danger" th:errors="*{name}"></p>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
            <input type="email"
                   class="form-control"
                   id="email"
                   th:field="*{email}"
                   required
                   title="Vui l√≤ng nh·∫≠p email h·ª£p l·ªá." />
            <p th:if="${#fields.hasErrors('email')}" class="text-danger" th:errors="*{email}"></p>
        </div>

        <div class="mb-3 text-start">
            <label for="password" class="form-label">M·∫≠t kh·∫©u (ƒë·ªÉ tr·ªëng n·∫øu kh√¥ng thay ƒë·ªïi)</label>
            <div class="position-relative">
                <input type="password"
                       class="form-control"
                       id="password"
                       name="password"
                       minlength="6"
                       title="M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª± n·∫øu nh·∫≠p." />
                <span class="toggle-password" onclick="togglePassword()">üëÅ</span>
            </div>
        </div>

        <div class="mb-3">
            <label for="role" class="form-label">Vai tr√≤ <span class="text-danger">*</span></label>
            <select class="form-control" id="role" required th:field="*{role}">
                <option value="USER">Kh√°ch h√†ng</option>
                <option value="ADMIN">Qu·∫£n tr·ªã vi√™n</option>
            </select>
            <p th:if="${#fields.hasErrors('role')}" class="text-danger" th:errors="*{role}"></p>
        </div>

        <div class="d-flex justify-content-between">
            <a href="/admin/account" class="btn btn-secondary">Quay l·∫°i</a>
            <button type="submit" class="btn btn-primary">C·∫≠p nh·∫≠t</button>
        </div>
    </form>
</div>
<script th:src="@{/js/bootstrap-5.3.3.js}"></script>
<script>
    function togglePassword() {
        var passwordInput = document.getElementById("password");
        passwordInput.type = passwordInput.type === "password" ? "text" : "password";
    }
</script>
</body>

</html>
